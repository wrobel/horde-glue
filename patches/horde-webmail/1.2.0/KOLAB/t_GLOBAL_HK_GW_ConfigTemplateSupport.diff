From: Gunnar Wrobel <p@rdus.de>
Subject: [PATCH] t/GLOBAL/HK/GW/ConfigTemplateSupport

This adds a small section to each configuration file that allows
overriding the default settings with a local configuration file.
These local overrides are going to be generated via templates for
the Kolab Server.

https://www.intevation.de/roundup/kolab/issue3420

Notes:

Did this + a few manual edits ->

 for FILE in `find horde-webmail/ -wholename *config/*.php | grep -v scripts`;do A=${FILE/*config\//}; B=${A/.php/.local.php};echo "if (file_exists(dirname(__FILE__) . '/$B')) {
  require_once(dirname(__FILE__) . '/$B');
}
" >> $FILE;done

for FILE in `find horde-webmail/ -wholename *config/*.php | grep -v scripts`;do A=${FILE/*config\//}; B=${A/.php/.local.php};C=${FILE//\//_};D=${C/horde-webmail_/};E=${D/_config/};echo "KOLAB_META_START
TARGET=@@@horde_confdir@@@/$B
PERMISSIONS=0400
OWNERSHIP=@@@webserver_usr@@@:@@@webserver_grp@@@
KOLAB_META_END
<?php
/* This file can be used to customize your kolab-webclient installation. */
/* Anything you add to this configuration file will override settings    */
/* from @@@horde_confdir@@@/$A
   Please refer to that file to see which settings you can influence via */
/* this template.                                                        */" > /CVS/server/kolab-webclient/webclient-${E};done


Signed-off-by: Gunnar Wrobel <p@rdus.de>

---
 horde-webmail/config/conf.php               |    2 +-
 horde-webmail/config/hooks.php              |    4 ++++
 horde-webmail/config/kolab.php              |    2 +-
 horde-webmail/config/mime_drivers.php       |    4 ++++
 horde-webmail/config/motd.php               |    7 +++++++
 horde-webmail/config/nls.php                |    4 ++++
 horde-webmail/config/prefs.php              |    4 ++++
 horde-webmail/config/registry.php           |    4 ++++
 horde-webmail/dimp/config/conf.php          |    4 ++++
 horde-webmail/dimp/config/hooks.php         |    4 ++++
 horde-webmail/dimp/config/menu.php          |    4 ++++
 horde-webmail/dimp/config/portal.php        |    4 ++++
 horde-webmail/dimp/config/prefs.php         |    4 ++++
 horde-webmail/dimp/config/servers.php       |    4 ++++
 horde-webmail/imp/config/conf.php           |    4 ++++
 horde-webmail/imp/config/header.php         |    4 ++++
 horde-webmail/imp/config/hooks.php          |    4 ++++
 horde-webmail/imp/config/menu.php           |    4 ++++
 horde-webmail/imp/config/mime_drivers.php   |    4 ++++
 horde-webmail/imp/config/motd.php           |    4 ++++
 horde-webmail/imp/config/prefs.php          |    4 ++++
 horde-webmail/imp/config/servers.php        |    4 ++++
 horde-webmail/imp/config/spelling.php       |    4 ++++
 horde-webmail/ingo/config/backends.php      |    4 ++++
 horde-webmail/ingo/config/conf.php          |    4 ++++
 horde-webmail/ingo/config/fields.php        |    4 ++++
 horde-webmail/ingo/config/hooks.php         |    4 ++++
 horde-webmail/ingo/config/prefs.php         |    4 ++++
 horde-webmail/kronolith/config/conf.php     |    2 +-
 horde-webmail/kronolith/config/keywords.php |    4 ++++
 horde-webmail/kronolith/config/kolab.php    |    2 +-
 horde-webmail/kronolith/config/menu.php     |    4 ++++
 horde-webmail/kronolith/config/prefs.php    |    4 ++++
 horde-webmail/mimp/config/conf.php          |    4 ++++
 horde-webmail/mimp/config/menu.php          |    4 ++++
 horde-webmail/mimp/config/mime_drivers.php  |    4 ++++
 horde-webmail/mimp/config/prefs.php         |    4 ++++
 horde-webmail/mnemo/config/conf.php         |    4 ++++
 horde-webmail/mnemo/config/prefs.php        |    4 ++++
 horde-webmail/nag/config/conf.php           |    4 ++++
 horde-webmail/nag/config/menu.php           |    4 ++++
 horde-webmail/nag/config/prefs.php          |    4 ++++
 horde-webmail/turba/config/attributes.php   |    4 ++++
 horde-webmail/turba/config/conf.php         |    4 ++++
 horde-webmail/turba/config/hooks.php        |    4 ++++
 horde-webmail/turba/config/menu.php         |    4 ++++
 horde-webmail/turba/config/mime_drivers.php |    4 ++++
 horde-webmail/turba/config/prefs.php        |    4 ++++
 horde-webmail/turba/config/sources.php      |    4 ++++
 49 files changed, 187 insertions(+), 4 deletions(-)

diff --git a/horde-webmail/config/conf.php b/horde-webmail/config/conf.php
index ae2acef..b3b8467 100644
--- a/horde-webmail/config/conf.php
+++ b/horde-webmail/config/conf.php
@@ -113,5 +113,5 @@ $conf['kolab']['enabled'] = true;
 $conf['memcache']['enabled'] = false;
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
 if (file_exists(dirname(__FILE__) . '/kolab.php')) {
-  require_once(dirname(__FILE__) . '/kolab.php');
+  require(dirname(__FILE__) . '/kolab.php');
 }
diff --git a/horde-webmail/config/hooks.php b/horde-webmail/config/hooks.php
index 1fb2f6e..c3ed33a 100644
--- a/horde-webmail/config/hooks.php
+++ b/horde-webmail/config/hooks.php
@@ -691,3 +691,7 @@ if (!function_exists('_prefs_hook_fullname')) {
         }
     }
 }*/
+if (file_exists(dirname(__FILE__) . '/hooks.local.php')) {
+  require(dirname(__FILE__) . '/hooks.local.php');
+}
+
diff --git a/horde-webmail/config/kolab.php b/horde-webmail/config/kolab.php
index 57a5a43..ed41da4 100644
--- a/horde-webmail/config/kolab.php
+++ b/horde-webmail/config/kolab.php
@@ -36,5 +36,5 @@ $conf['kolab']['imap']['server'] = 'localhost';
 $conf['kolab']['imap']['maildomain'] = 'example.com';
 
 if (file_exists(dirname(__FILE__) . '/kolab.local.php')) {
-  require_once(dirname(__FILE__) . '/kolab.local.php');
+  require(dirname(__FILE__) . '/kolab.local.php');
 }
diff --git a/horde-webmail/config/mime_drivers.php b/horde-webmail/config/mime_drivers.php
index e963402..d314839 100644
--- a/horde-webmail/config/mime_drivers.php
+++ b/horde-webmail/config/mime_drivers.php
@@ -638,3 +638,7 @@ $mime_drivers['horde']['wordperfect'] = array(
         'default' => 'wordperfect.png'
     )
 );
+if (file_exists(dirname(__FILE__) . '/mime_drivers.local.php')) {
+  require(dirname(__FILE__) . '/mime_drivers.local.php');
+}
+
diff --git a/horde-webmail/config/motd.php b/horde-webmail/config/motd.php
index 9f0b57b..14f0a62 100644
--- a/horde-webmail/config/motd.php
+++ b/horde-webmail/config/motd.php
@@ -1,6 +1,13 @@
 <!-- This file contains any "Message Of The Day" Type information -->
 <!-- It will be included below the log-in form on the login page. -->
 
+<?php
+if (file_exists(dirname(__FILE__) . '/motd.local.php')) {
+  require(dirname(__FILE__) . '/motd.local.php');
+}
+?>
+
 <br />
 <table width="100%"><tr><td align="center"><img src="themes/graphics/horde-power1.png" alt="Powered by Horde" /></td></tr></table>
 
+
diff --git a/horde-webmail/config/nls.php b/horde-webmail/config/nls.php
index 21a3d19..18a3e62 100644
--- a/horde-webmail/config/nls.php
+++ b/horde-webmail/config/nls.php
@@ -646,3 +646,7 @@ $tz['Pacific/Wallis'] = 'Pacific/Wallis';
 $tz['Pacific/Yap'] = 'Pacific/Yap';
 
 $GLOBALS['tz'] = &$tz;
+if (file_exists(dirname(__FILE__) . '/nls.local.php')) {
+  require(dirname(__FILE__) . '/nls.local.php');
+}
+
diff --git a/horde-webmail/config/prefs.php b/horde-webmail/config/prefs.php
index 52c7730..c9e5d80 100644
--- a/horde-webmail/config/prefs.php
+++ b/horde-webmail/config/prefs.php
@@ -574,3 +574,7 @@ $_prefs['editor_plugins'] = array(
     'desc' => _("Select editor plugins")
 );
 // End Rich Text Editor preferences.
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/config/registry.php b/horde-webmail/config/registry.php
index cbd6221..0c1c400 100644
--- a/horde-webmail/config/registry.php
+++ b/horde-webmail/config/registry.php
@@ -525,3 +525,7 @@ function _detect_webroot()
 
     return $webroot;
 }
+if (file_exists(dirname(__FILE__) . '/registry.local.php')) {
+  require(dirname(__FILE__) . '/registry.local.php');
+}
+
diff --git a/horde-webmail/dimp/config/conf.php b/horde-webmail/dimp/config/conf.php
index de4e32c..0ae4bf3 100644
--- a/horde-webmail/dimp/config/conf.php
+++ b/horde-webmail/dimp/config/conf.php
@@ -15,3 +15,7 @@ $conf['viewport']['background_inbox'] = true;
 $conf['search']['search_all'] = false;
 $conf['menu']['apps'] = array('turba', 'ingo', 'kronolith', 'nag', 'mnemo');
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
+if (file_exists(dirname(__FILE__) . '/conf.local.php')) {
+  require(dirname(__FILE__) . '/conf.local.php');
+}
+
diff --git a/horde-webmail/dimp/config/hooks.php b/horde-webmail/dimp/config/hooks.php
index f315631..92de08e 100644
--- a/horde-webmail/dimp/config/hooks.php
+++ b/horde-webmail/dimp/config/hooks.php
@@ -123,3 +123,7 @@
 //         return $ret;
 //     }
 // }
+if (file_exists(dirname(__FILE__) . '/hooks.local.php')) {
+  require(dirname(__FILE__) . '/hooks.local.php');
+}
+
diff --git a/horde-webmail/dimp/config/menu.php b/horde-webmail/dimp/config/menu.php
index 5dcf354..0c6ebe9 100644
--- a/horde-webmail/dimp/config/menu.php
+++ b/horde-webmail/dimp/config/menu.php
@@ -28,3 +28,7 @@
 //         'text' => 'Say Hi!',
 //         'icon' => $GLOBALS['registry']->getImageDir('horde') . '/horde.png'),
 // );
+if (file_exists(dirname(__FILE__) . '/menu.local.php')) {
+  require(dirname(__FILE__) . '/menu.local.php');
+}
+
diff --git a/horde-webmail/dimp/config/portal.php b/horde-webmail/dimp/config/portal.php
index 7720eb3..89d32cf 100644
--- a/horde-webmail/dimp/config/portal.php
+++ b/horde-webmail/dimp/config/portal.php
@@ -47,3 +47,7 @@ $dimp_block_list[$collection->getName('turba', 'minisearch')] = array(
 $dimp_block_list[$collection->getName('kronolith', 'summary')] = array(
     'ob' => $collection->getBlock('kronolith', 'summary', array())
 );
+if (file_exists(dirname(__FILE__) . '/portal.local.php')) {
+  require(dirname(__FILE__) . '/portal.local.php');
+}
+
diff --git a/horde-webmail/dimp/config/prefs.php b/horde-webmail/dimp/config/prefs.php
index a55ecc2..a72bc5e 100644
--- a/horde-webmail/dimp/config/prefs.php
+++ b/horde-webmail/dimp/config/prefs.php
@@ -30,3 +30,7 @@ $_prefs['show_preview'] = array(
     'shared' => false,
     'type' => 'implicit',
 );
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/dimp/config/servers.php b/horde-webmail/dimp/config/servers.php
index 30962f3..d84eacb 100644
--- a/horde-webmail/dimp/config/servers.php
+++ b/horde-webmail/dimp/config/servers.php
@@ -253,3 +253,7 @@ if ($GLOBALS['conf']['kolab']['enabled']) {
         ),
     );
 }
+if (file_exists(dirname(__FILE__) . '/servers.local.php')) {
+  require(dirname(__FILE__) . '/servers.local.php');
+}
+
diff --git a/horde-webmail/imp/config/conf.php b/horde-webmail/imp/config/conf.php
index 3a0f1d6..63eebb4 100644
--- a/horde-webmail/imp/config/conf.php
+++ b/horde-webmail/imp/config/conf.php
@@ -63,3 +63,7 @@ $conf['sentmail']['driver'] = 'none';
 $conf['tasklist']['use_tasklist'] = true;
 $conf['notepad']['use_notepad'] = true;
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
+if (file_exists(dirname(__FILE__) . '/conf.local.php')) {
+  require(dirname(__FILE__) . '/conf.local.php');
+}
+
diff --git a/horde-webmail/imp/config/header.php b/horde-webmail/imp/config/header.php
index a442e09..e923ef7 100644
--- a/horde-webmail/imp/config/header.php
+++ b/horde-webmail/imp/config/header.php
@@ -20,3 +20,7 @@
 $_header = array();
 
 /* Add your custom entries below this line. */
+if (file_exists(dirname(__FILE__) . '/header.local.php')) {
+  require(dirname(__FILE__) . '/header.local.php');
+}
+
diff --git a/horde-webmail/imp/config/hooks.php b/horde-webmail/imp/config/hooks.php
index 3bab14e..d47a957 100644
--- a/horde-webmail/imp/config/hooks.php
+++ b/horde-webmail/imp/config/hooks.php
@@ -535,3 +535,7 @@ if (!function_exists('_imp_hook_quota')) {
         return array($quota[1] * 1024, $quota[2] * 1024);
     }
 }
+if (file_exists(dirname(__FILE__) . '/hooks.local.php')) {
+  require(dirname(__FILE__) . '/hooks.local.php');
+}
+
diff --git a/horde-webmail/imp/config/menu.php b/horde-webmail/imp/config/menu.php
index 1ea56c7..40d72ac 100644
--- a/horde-webmail/imp/config/menu.php
+++ b/horde-webmail/imp/config/menu.php
@@ -39,3 +39,7 @@
 $_menu = array();
 
 /* Add your custom entries below this line. */
+if (file_exists(dirname(__FILE__) . '/menu.local.php')) {
+  require(dirname(__FILE__) . '/menu.local.php');
+}
+
diff --git a/horde-webmail/imp/config/mime_drivers.php b/horde-webmail/imp/config/mime_drivers.php
index 1019aaf..33bbd19 100644
--- a/horde-webmail/imp/config/mime_drivers.php
+++ b/horde-webmail/imp/config/mime_drivers.php
@@ -301,3 +301,7 @@ $mime_drivers['imp']['tnef'] = array(
         'default' => 'binary.png'
     )
 );
+if (file_exists(dirname(__FILE__) . '/mime_drivers.local.php')) {
+  require(dirname(__FILE__) . '/mime_drivers.local.php');
+}
+
diff --git a/horde-webmail/imp/config/motd.php b/horde-webmail/imp/config/motd.php
index 70803c9..1b677df 100644
--- a/horde-webmail/imp/config/motd.php
+++ b/horde-webmail/imp/config/motd.php
@@ -36,6 +36,10 @@
 //
 // echo '<a class="small" href="' . $SERVER_HTTP_URL . '" target="_parent">' . _("Click here for Standard HTTP") . '</a> - <a class="small" href="' . $SERVER_SSL_URL . '" target="_parent">' . _("Click here for Secure HTTPS") . '</a></div>';
 
+if (file_exists(dirname(__FILE__) . '/motd.local.php')) {
+  require(dirname(__FILE__) . '/motd.local.php');
+}
 ?>
 <br />
 <table width="100%"><tr><td align="center"><?php echo Horde::img('horde-power1.png', _("Powered by Horde"), '', $registry->getImageDir('horde')) ?></td></tr></table>
+
diff --git a/horde-webmail/imp/config/prefs.php b/horde-webmail/imp/config/prefs.php
index e1f6426..e5fde65 100644
--- a/horde-webmail/imp/config/prefs.php
+++ b/horde-webmail/imp/config/prefs.php
@@ -1506,3 +1506,7 @@ $_prefs['vinbox_id'] = array(
     'locked' => false,
     'shared' => false,
     'type' => 'implicit');
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/imp/config/servers.php b/horde-webmail/imp/config/servers.php
index 1c6e537..c63908e 100644
--- a/horde-webmail/imp/config/servers.php
+++ b/horde-webmail/imp/config/servers.php
@@ -286,3 +286,7 @@ if ($GLOBALS['conf']['kolab']['enabled']) {
         ),
     );
 }
+if (file_exists(dirname(__FILE__) . '/servers.local.php')) {
+  require(dirname(__FILE__) . '/servers.local.php');
+}
+
diff --git a/horde-webmail/imp/config/spelling.php b/horde-webmail/imp/config/spelling.php
index e9b78bd..743e944 100644
--- a/horde-webmail/imp/config/spelling.php
+++ b/horde-webmail/imp/config/spelling.php
@@ -11,3 +11,7 @@ $ignore_list = array(
     'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct',
     'nov', 'dec', 'fwd', 'http', 'https', 'html', 'email', 'bcc', 'jpg', 'gif'
 );
+if (file_exists(dirname(__FILE__) . '/spelling.local.php')) {
+  require(dirname(__FILE__) . '/spelling.local.php');
+}
+
diff --git a/horde-webmail/ingo/config/backends.php b/horde-webmail/ingo/config/backends.php
index d5e26c1..a8bfe8e 100644
--- a/horde-webmail/ingo/config/backends.php
+++ b/horde-webmail/ingo/config/backends.php
@@ -327,3 +327,7 @@ if ($GLOBALS['conf']['kolab']['enabled']) {
         'shares' => false
     );
 }
+if (file_exists(dirname(__FILE__) . '/backends.local.php')) {
+  require(dirname(__FILE__) . '/backends.local.php');
+}
+
diff --git a/horde-webmail/ingo/config/conf.php b/horde-webmail/ingo/config/conf.php
index ffc834a..d134396 100644
--- a/horde-webmail/ingo/config/conf.php
+++ b/horde-webmail/ingo/config/conf.php
@@ -13,3 +13,7 @@ $conf['spam']['compare'] = 'string';
 $conf['hooks']['vacation_addresses'] = false;
 $conf['hooks']['vacation_only'] = true;
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
+if (file_exists(dirname(__FILE__) . '/conf.local.php')) {
+  require(dirname(__FILE__) . '/conf.local.php');
+}
+
diff --git a/horde-webmail/ingo/config/fields.php b/horde-webmail/ingo/config/fields.php
index 045ff52..590a143 100644
--- a/horde-webmail/ingo/config/fields.php
+++ b/horde-webmail/ingo/config/fields.php
@@ -104,3 +104,7 @@ $ingo_fields = array(
                      'matches', 'not matches')
   )
 );
+if (file_exists(dirname(__FILE__) . '/fields.local.php')) {
+  require(dirname(__FILE__) . '/fields.local.php');
+}
+
diff --git a/horde-webmail/ingo/config/hooks.php b/horde-webmail/ingo/config/hooks.php
index 9e52c95..212ac1c 100644
--- a/horde-webmail/ingo/config/hooks.php
+++ b/horde-webmail/ingo/config/hooks.php
@@ -22,3 +22,7 @@
 //         return array($user . '@example.com', $user . '@foobar.com');
 //     }
 // }
+if (file_exists(dirname(__FILE__) . '/hooks.local.php')) {
+  require(dirname(__FILE__) . '/hooks.local.php');
+}
+
diff --git a/horde-webmail/ingo/config/prefs.php b/horde-webmail/ingo/config/prefs.php
index fe645fb..0015f92 100644
--- a/horde-webmail/ingo/config/prefs.php
+++ b/horde-webmail/ingo/config/prefs.php
@@ -112,3 +112,7 @@ $_prefs['spam'] = array(
     'shared' => false,
     'type' => 'implicit'
 );
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/kronolith/config/conf.php b/horde-webmail/kronolith/config/conf.php
index 97453ac..bdc479f 100644
--- a/horde-webmail/kronolith/config/conf.php
+++ b/horde-webmail/kronolith/config/conf.php
@@ -15,5 +15,5 @@ $conf['menu']['apps'] = array();
 $conf['authenticated_freebusy'] = true;
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
 if (file_exists(dirname(__FILE__) . '/kolab.php')) {
-  require_once(dirname(__FILE__) . '/kolab.php');
+  require(dirname(__FILE__) . '/kolab.php');
 }
diff --git a/horde-webmail/kronolith/config/keywords.php b/horde-webmail/kronolith/config/keywords.php
index 6ed32d5..ab9bcaa 100644
--- a/horde-webmail/kronolith/config/keywords.php
+++ b/horde-webmail/kronolith/config/keywords.php
@@ -15,3 +15,7 @@
  */
 
 $keywords[_("Type")] = array(_("Birthday"), _("Meeting"), _("Game"));
+if (file_exists(dirname(__FILE__) . '/keywords.local.php')) {
+  require(dirname(__FILE__) . '/keywords.local.php');
+}
+
diff --git a/horde-webmail/kronolith/config/kolab.php b/horde-webmail/kronolith/config/kolab.php
index f6b6d2a..117c02b 100644
--- a/horde-webmail/kronolith/config/kolab.php
+++ b/horde-webmail/kronolith/config/kolab.php
@@ -9,5 +9,5 @@ $conf['reminder']['server_name'] = 'localhost';
 $conf['reminder']['from_addr'] = 'hostmaster@example.com';
 
 if (file_exists(dirname(__FILE__) . '/kolab.local.php')) {
-  require_once(dirname(__FILE__) . '/kolab.local.php');
+  require(dirname(__FILE__) . '/kolab.local.php');
 }
diff --git a/horde-webmail/kronolith/config/menu.php b/horde-webmail/kronolith/config/menu.php
index 282ac8a..714f1a9 100644
--- a/horde-webmail/kronolith/config/menu.php
+++ b/horde-webmail/kronolith/config/menu.php
@@ -39,3 +39,7 @@
 $_menu = array();
 
 /* Add your custom entries below this line. */
+if (file_exists(dirname(__FILE__) . '/menu.local.php')) {
+  require(dirname(__FILE__) . '/menu.local.php');
+}
+
diff --git a/horde-webmail/kronolith/config/prefs.php b/horde-webmail/kronolith/config/prefs.php
index 22c08c3..0985453 100644
--- a/horde-webmail/kronolith/config/prefs.php
+++ b/horde-webmail/kronolith/config/prefs.php
@@ -497,3 +497,7 @@ $_prefs['last_kronolith_maintenance'] = array(
     'shared' => false,
     'type' => 'implicit'
 );
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/mimp/config/conf.php b/horde-webmail/mimp/config/conf.php
index 29762a5..6c8b3fb 100644
--- a/horde-webmail/mimp/config/conf.php
+++ b/horde-webmail/mimp/config/conf.php
@@ -4,3 +4,7 @@
 $conf['mailbox']['max_from_chars'] = 10;
 $conf['mailbox']['max_subj_chars'] = 20;
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
+if (file_exists(dirname(__FILE__) . '/conf.local.php')) {
+  require(dirname(__FILE__) . '/conf.local.php');
+}
+
diff --git a/horde-webmail/mimp/config/menu.php b/horde-webmail/mimp/config/menu.php
index 2f0a5c7..af1c378 100644
--- a/horde-webmail/mimp/config/menu.php
+++ b/horde-webmail/mimp/config/menu.php
@@ -27,3 +27,7 @@
 $_menu = array();
 
 /* Add your custom entries below this line. */
+if (file_exists(dirname(__FILE__) . '/menu.local.php')) {
+  require(dirname(__FILE__) . '/menu.local.php');
+}
+
diff --git a/horde-webmail/mimp/config/mime_drivers.php b/horde-webmail/mimp/config/mime_drivers.php
index 1666a86..15a30e0 100644
--- a/horde-webmail/mimp/config/mime_drivers.php
+++ b/horde-webmail/mimp/config/mime_drivers.php
@@ -100,3 +100,7 @@ $mime_drivers['mimp']['multipart'] = array(
         'multipart/*'
     )
 );
+if (file_exists(dirname(__FILE__) . '/mime_drivers.local.php')) {
+  require(dirname(__FILE__) . '/mime_drivers.local.php');
+}
+
diff --git a/horde-webmail/mimp/config/prefs.php b/horde-webmail/mimp/config/prefs.php
index 52bbb95..f992945 100644
--- a/horde-webmail/mimp/config/prefs.php
+++ b/horde-webmail/mimp/config/prefs.php
@@ -23,3 +23,7 @@ $_prefs['preview_msg'] = array(
     'desc' => _("Display only the first 250 characters of a message initially?"));
 
 // End Message Viewing preferences
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/mnemo/config/conf.php b/horde-webmail/mnemo/config/conf.php
index a4e9764..2cfda07 100644
--- a/horde-webmail/mnemo/config/conf.php
+++ b/horde-webmail/mnemo/config/conf.php
@@ -7,3 +7,7 @@ $conf['menu']['print'] = true;
 $conf['menu']['import_export'] = true;
 $conf['menu']['apps'] = array();
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
+if (file_exists(dirname(__FILE__) . '/conf.local.php')) {
+  require(dirname(__FILE__) . '/conf.local.php');
+}
+
diff --git a/horde-webmail/mnemo/config/prefs.php b/horde-webmail/mnemo/config/prefs.php
index b83d5a4..fcbd434 100644
--- a/horde-webmail/mnemo/config/prefs.php
+++ b/horde-webmail/mnemo/config/prefs.php
@@ -116,3 +116,7 @@ $_prefs['delete_opt'] = array(
     'type' => 'checkbox',
     'desc' => _("Do you want to confirm deleting entries?")
 );
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/nag/config/conf.php b/horde-webmail/nag/config/conf.php
index 7809067..7756f05 100644
--- a/horde-webmail/nag/config/conf.php
+++ b/horde-webmail/nag/config/conf.php
@@ -6,3 +6,7 @@ $conf['menu']['print'] = true;
 $conf['menu']['import_export'] = true;
 $conf['menu']['apps'] = array();
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
+if (file_exists(dirname(__FILE__) . '/conf.local.php')) {
+  require(dirname(__FILE__) . '/conf.local.php');
+}
+
diff --git a/horde-webmail/nag/config/menu.php b/horde-webmail/nag/config/menu.php
index 162c88c..433f36e 100644
--- a/horde-webmail/nag/config/menu.php
+++ b/horde-webmail/nag/config/menu.php
@@ -39,3 +39,7 @@
 $_menu = array();
 
 /* Add your custom entries below this line. */
+if (file_exists(dirname(__FILE__) . '/menu.local.php')) {
+  require(dirname(__FILE__) . '/menu.local.php');
+}
+
diff --git a/horde-webmail/nag/config/prefs.php b/horde-webmail/nag/config/prefs.php
index e14bd8a..c067123 100644
--- a/horde-webmail/nag/config/prefs.php
+++ b/horde-webmail/nag/config/prefs.php
@@ -238,3 +238,7 @@ $_prefs['display_tasklists'] = array(
     'shared' => false,
     'type' => 'implicit',
 );
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/turba/config/attributes.php b/horde-webmail/turba/config/attributes.php
index ce124f0..495f1d9 100644
--- a/horde-webmail/turba/config/attributes.php
+++ b/horde-webmail/turba/config/attributes.php
@@ -558,3 +558,7 @@ $attributes['homeLongitude'] = array(
     'type' => 'number',
     'required' => false,
 );
+if (file_exists(dirname(__FILE__) . '/attributes.local.php')) {
+  require(dirname(__FILE__) . '/attributes.local.php');
+}
+
diff --git a/horde-webmail/turba/config/conf.php b/horde-webmail/turba/config/conf.php
index b83f681..93f9e16 100644
--- a/horde-webmail/turba/config/conf.php
+++ b/horde-webmail/turba/config/conf.php
@@ -8,3 +8,7 @@ $conf['shares']['source'] = 'kolab';
 $conf['comments']['allow'] = true;
 $conf['documents']['type'] = 'horde';
 /* CONFIG END. DO NOT CHANGE ANYTHING IN OR BEFORE THIS LINE. */
+if (file_exists(dirname(__FILE__) . '/conf.local.php')) {
+  require(dirname(__FILE__) . '/conf.local.php');
+}
+
diff --git a/horde-webmail/turba/config/hooks.php b/horde-webmail/turba/config/hooks.php
index b7d0d40..02f297c 100644
--- a/horde-webmail/turba/config/hooks.php
+++ b/horde-webmail/turba/config/hooks.php
@@ -38,3 +38,7 @@
 //         }
 //     }
 // }
+if (file_exists(dirname(__FILE__) . '/hooks.local.php')) {
+  require(dirname(__FILE__) . '/hooks.local.php');
+}
+
diff --git a/horde-webmail/turba/config/menu.php b/horde-webmail/turba/config/menu.php
index 418a4b3..98d9bb1 100644
--- a/horde-webmail/turba/config/menu.php
+++ b/horde-webmail/turba/config/menu.php
@@ -39,3 +39,7 @@
 $_menu = array();
 
 /* Add your custom entries below this line. */
+if (file_exists(dirname(__FILE__) . '/menu.local.php')) {
+  require(dirname(__FILE__) . '/menu.local.php');
+}
+
diff --git a/horde-webmail/turba/config/mime_drivers.php b/horde-webmail/turba/config/mime_drivers.php
index 729ca75..631981e 100644
--- a/horde-webmail/turba/config/mime_drivers.php
+++ b/horde-webmail/turba/config/mime_drivers.php
@@ -19,3 +19,7 @@ $mime_drivers_map['turba']['overrides'] = array();
  * Driver specific settings. See horde/config/mime_drivers.php for
  * the format.
  */
+if (file_exists(dirname(__FILE__) . '/mime_drivers.local.php')) {
+  require(dirname(__FILE__) . '/mime_drivers.local.php');
+}
+
diff --git a/horde-webmail/turba/config/prefs.php b/horde-webmail/turba/config/prefs.php
index 2f7c7c3..00fccd9 100644
--- a/horde-webmail/turba/config/prefs.php
+++ b/horde-webmail/turba/config/prefs.php
@@ -162,3 +162,7 @@ $_prefs['own_contact'] = array(
     'shared' => false,
     'type' => 'implicit'
 );
+if (file_exists(dirname(__FILE__) . '/prefs.local.php')) {
+  require(dirname(__FILE__) . '/prefs.local.php');
+}
+
diff --git a/horde-webmail/turba/config/sources.php b/horde-webmail/turba/config/sources.php
index 083defe..6eb2adc 100644
--- a/horde-webmail/turba/config/sources.php
+++ b/horde-webmail/turba/config/sources.php
@@ -547,3 +547,7 @@ $cfgSources['favourites'] = array(
     'export' => true,
     'browse' => true,
 );
+if (file_exists(dirname(__FILE__) . '/sources.local.php')) {
+  require(dirname(__FILE__) . '/sources.local.php');
+}
+
-- 
tg: (b375ec9..) t/GLOBAL/HK/GW/ConfigTemplateSupport (depends on: t/GLOBAL/HK/GW/ConfigOpenPKG)
-- 
TOPGIT patch commit log
=======================

commit 035fe552971c927ea019675db85d81061c6a0f8e
Author: Gunnar Wrobel <p@rdus.de>
Date:   Wed May 13 12:05:31 2009 +0200

    require_once -> require.

commit 1714037ef074301c0fd987b217fee5a0a1cac71b
Author: Gunnar Wrobel <p@rdus.de>
Date:   Thu Mar 26 21:08:33 2009 +0000

    Fix the inclusion statements for the motd.php files.

commit caf19136c96afa98cf1fc7f3a66cc74af6cb286a
Author: Gunnar Wrobel <p@rdus.de>
Date:   Thu Mar 26 16:44:50 2009 +0000

    Added postfix sections to all horde config files.
